<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Baseline JIT Test</title>
</head>
<body>
<h1>Baseline JIT Stress Test</h1>
<pre id="output"></pre>

<script>
function heavyComputation(size) {
    let arr = new Array(size);
    for (let i = 0; i < size; i++) arr[i] = Math.random() * 1000;

    let sum = 0;
    for (let i = 0; i < arr.length; i++) {
        sum += Math.sqrt(arr[i]) * Math.sin(arr[i]) + Math.log(arr[i] + 1);
    }
    return sum;
}

const output = document.getElementById('output');
const rounds = 5;
const size = 10_000_000; // 10 مليون عنصر لكل جولة
let results = [];

for (let r = 1; r <= rounds; r++) {
    const start = performance.now();
    const res = heavyComputation(size);
    const end = performance.now();
    const duration = (end - start).toFixed(2);
    results.push(duration);
    output.textContent += `جولة ${r}: ${duration} ms\n`;
}

output.textContent += "\nالأرقام الأعلى تعني وقت أطول، انخفاض تدريجي يدل على أن JIT يعمل.";
</script>
</body>
</html>